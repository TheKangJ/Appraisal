<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>查看评议结果</title>
    <link rel="stylesheet" href="../layui-v2.5.5">
    <script src="../../../static/myApp/layui/layui.js"></script>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../../../static/myApp/layui/css/layui.css" media="all">
</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
    <div class="layui-header">
        <div class="layui-col-md3">
            <div class="layui-logo">
                <img src="../../../static/myApp/images/logo.png" class="layui-nav-img">
                <span style="font-size: 15px;color: #FFB800;">"一报告两评议"系统</span>
            </div>
        </div>
        <!-- 头部区域（可配合layui已有的水平导航） -->
        <ul class="layui-nav layui-layout-right">
            <li class="layui-nav-item">
                <a href="javascript:;">
                    <img src="http://t.cn/RCzsdCq" class="layui-nav-img">
                    一级管理员
                </a>
            </li>
            <li class="layui-nav-item"><a href="">退出</a></li>
        </ul>
    </div>

    <div class="layui-side layui-bg-black">
        <div class="layui-side-scroll">
            <ul class="layui-nav layui-nav-tree" lay-filter="test">
                <li class="layui-nav-item layui-nav-itemed">
                    <dd>
                        <a href="/myApp/Admin/inform/">发布通知</a>
                    </dd>
                    <dd>
                        <a href="/myApp/Admin/register/">注册二级管理员</a>
                    </dd>
                    <dd>
                        <a href="/myApp/Admin/ctl/">管理二级管理员</a>
                    </dd>
                    <dd>
                        <a href="/myApp/Admin/canditate/">导入被评人</a>
                    </dd>
                    <dd>
                        <a href="/myApp/Admin/result/">查看评议结果</a>
                    </dd>
                    <dd>
                        <a href="/myApp/Admin/check/">实时查询</a>
                    </dd>
                </li>
            </ul>
        </div>
    </div>

    <div class="layui-body">
        <!-- 内容主体区域 -->
        <div style="padding: 15px;">
            <div class="layui-container" style="margin-top: 30px;">
                <div class="layui-tab">
                    <ul class="layui-tab-title">
                        <li class="layui-this">新选拔任用干部民主评议表</li>
                        <li>选人用人工作评议表</li>
                        <li>干部选拔任用"一报告两评议"结果反馈表</li>
                    </ul>
                    <div class="layui-tab-content">
                        <div class="layui-tab-item layui-show"><!--内容1-->

                            <div class="layui-row">
                                <div class="layui-col-md9">
                                    <form class="layui-form" action="">

                                        <div class="layui-form-item">
                                            <label class="layui-form-label">二级单位</label>
                                            <div class="layui-input-block">
                                                <select name="city" lay-verify="required" placeholder="请选择二级单位名称">
                                                    <option value=""></option>
                                                    <option value="安太堡露天矿">安太堡露天矿</option>
                                                    <option value="安家岭露天矿">安家岭露天矿</option>
                                                    <option value="东露天矿">东露天矿</option>
                                                    <option value="中煤平朔集团有限公司">中煤平朔集团有限公司</option>
                                                    <option value="井工一矿">井工一矿</option>
                                                    <option value="井工二矿">井工二矿</option>
                                                </select>
                                            </div>
                                        </div>

                                    </form>

                                </div>

                                <div class="layui-col-md11">

                                    <table id="table1" lay-filter="test"></table>

                                </div>

                            </div>

                        </div>
                        <div class="layui-tab-item"><!--内容2-->

                            <div class="layui-row">
                                <div class="layui-col-md9">
                                    <form class="layui-form" action="">

                                        <div class="layui-form-item">
                                            <label class="layui-form-label">二级单位</label>
                                            <div class="layui-input-block">
                                                <select name="city" lay-verify="required" placeholder="请选择二级单位名称">

                                                    <option value=""></option>
                                                    <option value="0">平朔煤矿</option>
                                                    <option value="1">平朔铁矿</option>
                                                    <option value="2">平朔石油</option>
                                                </select>
                                            </div>
                                        </div>

                                    </form>

                                </div>


                                <div class="layui-col-md11">

                                    <table id="demo2" lay-filter="test" class="lauui-table"
                                           lay-data="{width:800, url:'url', page: true, limit: 6, limits:[6]}">

                                        <thead>
                                        <tr>
                                            <th lay-data="{checkbox:true, fixed:'left'}" rowspan="2"></th>
                                            <th lay-data="{field:'username', width:150}" rowspan="2">联系人</th>
                                            <th lay-data="{align:'center'}" colspan="3">地址</th>
                                            <th lay-data="{field:'amount', width:120}" rowspan="2">金额</th>
                                            <th lay-data="{fixed: 'right', width: 160, align: 'center', toolbar: '#barDemo'}"
                                                rowspan="2">操作
                                            </th>
                                        </tr>
                                        <tr>
                                            <th lay-data="{field:'province', width:120}">省</th>
                                            <th lay-data="{field:'city', width:120}">市</th>
                                            <th lay-data="{field:'zone', width:200}">区</th>
                                        </tr>
                                        </thead>
                                    </table>

                                </div>

                            </div>

                        </div>
                        <div class="layui-tab-item"><!--内容3-->

                            <div class="layui-row">
                                <div class="layui-col-md9">
                                    <form class="layui-form" action="">

                                        <div class="layui-form-item">
                                            <label class="layui-form-label">二级单位</label>
                                            <div class="layui-input-block">
                                                <select name="city" lay-verify="required" placeholder="请选择二级单位名称">

                                                    <option value=""></option>
                                                    <option value="0">平朔煤矿</option>
                                                    <option value="1">平朔铁矿</option>
                                                    <option value="2">平朔石油</option>
                                                </select>
                                            </div>
                                        </div>

                                    </form>

                                </div>


                                <div class="layui-col-md11">

                                    <table id="demo3" lay-filter="test" class="lauui-table"
                                           lay-data="{width:800, url:'url', page: true, limit: 6, limits:[6]}">

                                        <thead>
                                        <tr>
                                            <th lay-data="{checkbox:true, fixed:'left'}" rowspan="2"></th>
                                            <th lay-data="{field:'username', width:150}" rowspan="2">联系人</th>
                                            <th lay-data="{align:'center'}" colspan="3">地址</th>
                                            <th lay-data="{field:'amount', width:120}" rowspan="2">金额</th>
                                            <th lay-data="{fixed: 'right', width: 160, align: 'center', toolbar: '#barDemo'}"
                                                rowspan="2">操作
                                            </th>
                                        </tr>
                                        <tr>
                                            <th lay-data="{field:'province', width:120}">省</th>
                                            <th lay-data="{field:'city', width:120}">市</th>
                                            <th lay-data="{field:'zone', width:200}">区</th>
                                        </tr>
                                        </thead>
                                    </table>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>

        </div>


    </div>
</div>

<div class="layui-footer">
    <!-- 底部固定区域 -->
    © 平朔集团
</div>
</div>

<script src="../../../static/myApp/layui/layui.js" charset="utf-8"></script>
<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
<script>
    var url = "/myApp/Admin/checkresult";

    layui.use('element', function () {
        var element = layui.element;

    });
    layui.use('form', function () {
        var form = layui.form;
        form.on('select', function (data) {
            url = url + "?secondDepart=" + data.value;
            console.log(data.value); //得到被选中的值
            layui.use('table', function () {
                var table = layui.table;

                table.render({
                    elem: '#table1'
                    , height: 505
                    , url: url //数据接口
                    , page: true //开启分页
                    , cols:
                        [[ //标题栏
                            {align: 'center', title: '被测评干部的基本情况', colspan: 6}
                            , {align: 'center', title: '新选拔任用干部', colspan: 4}
                            , {align: 'center', title: '认为新选拔干部存在拉票、跑官、买官行为', colspan: 3}
                            //colspan即横跨的单元格数，这种情况下不用设置field和width
                        ], [
                            {field: 'cname', title: '姓名', width: 80}
                            , {field: 'cgender', title: '性别', width: 60}
                            , {field: 'cbirth', title: '出生年月', width: 100}
                            , {field: 'cjobbef', title: '原任职务', width: 100}
                            , {field: 'cjobnow', title: '现任职务', width: 90}
                            , {field: 'cjobnowT', title: '任职时间', width: 90}

                            , {field: 'cpoint_4', title: '满意', width: 100}
                            , {field: 'cpoint_3', title: '基本满意', width: 100}
                            , {field: 'cpoint_2', title: '不满意', width: 100}
                            , {field: 'cpoint_1', title: '不了解', width: 100}

                            , {field: 'ccheck_0', title: '存在', width: 100}
                            , {field: 'ccheck_2', title: '不存在', width: 100}
                            , {field: 'ccheck_1', title: '不了解', width: 100}
                        ]],
                    done: function () {
                        url = "/myApp/Admin/checkresult";
                    }
                })
                ;
                table.render({
                    elem: '#demo2'
                    , height: 505
                    , url: url //数据接口
                    , page: true //开启分页
                    , cols:
                        [[ //表头
                            {field: 'id', title: 'ID', width: 80, sort: true, fixed: 'left'}
                            , {field: 'username', title: '用户名', width: 80}
                            , {field: 'sex', title: '性别', width: 80, sort: true}
                            , {field: 'city', title: '城市', width: 80}
                            , {field: 'sign', title: '签名', width: 177}
                            , {field: 'experience', title: '积分', width: 80, sort: true}
                            , {field: 'score', title: '评分', width: 80, sort: true}
                            , {field: 'classify', title: '职业', width: 80}
                            , {field: 'wealth', title: '财富', width: 135, sort: true}

                        ]]
                });

                table.on('toolbar(test)', function (obj) {
                    var checkStatus = table.checkStatus(obj.config.id)
                        , data = checkStatus.data; //获取选中的数据
                    console.log(obj);
                    switch (obj.event) {
                        case 'add':
                            layer.msg('添加');
                            break;
                        case 'update':
                            if (data.length === 0) {
                                layer.msg('请选择一行');
                            } else if (data.length > 1) {
                                layer.msg('只能同时编辑一个');
                            } else {
                                layer.alert('编辑 [id]：' + checkStatus.data[0].id);
                            }
                            break;
                        case 'delete':
                            if (data.length === 0) {
                                layer.msg('请选择一行');
                            } else {
                                for (var i of checkStatus) {
                                    i.del();
                                }
                                layer.msg('删除');
                            }
                            break;
                    }
                    ;
                });

                table.on('tool(test)', function (obj) { //注：tool 是工具条事件名，test 是 table 原始容器的属性 lay-filter="对应的值"
                    var data = obj.data; //获得当前行数据
                    console.log(obj);
                    var layEvent = obj.event; //获得 lay-event 对应的值（也可以是表头的 event 参数对应的值）
                    var tr = obj.tr; //获得当前行 tr 的 DOM 对象（如果有的话）

                    if (layEvent === 'detail') { //查看
                        //do somehing
                    } else if (layEvent === 'del') { //删除
                        layer.confirm('真的删除行么', function (index) {
                            obj.del(); //删除对应行（tr）的DOM结构，并更新缓存
                            layer.close(index);
                            //向服务端发送删除指令
                        });
                    } else if (layEvent === 'edit') { //编辑
                        //do something

                        //同步更新缓存对应的值
                        obj.update({
                            username: '123'
                            , title: 'xxx'
                        });
                    } else if (layEvent === 'LAYTABLE_TIPS') {
                        layer.alert('Hi，头部工具栏扩展的右侧图标。');
                    }
                });
            })
        });
    })

</script>
<script type="text/html" id="bar">
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>

</body>
</html>